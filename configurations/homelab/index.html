<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-configurations/homelab" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">Homelab | Haris Qazi</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://www.harisqazi.com/img/blog_image.cleaned.jpeg"><meta data-rh="true" name="twitter:image" content="https://www.harisqazi.com/img/blog_image.cleaned.jpeg"><meta data-rh="true" property="og:url" content="https://www.harisqazi.com/configurations/homelab"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Homelab | Haris Qazi"><meta data-rh="true" name="description" content="Homelab Server Build"><meta data-rh="true" property="og:description" content="Homelab Server Build"><link data-rh="true" rel="icon" href="/img/HQ-Logo-Dark.png"><link data-rh="true" rel="canonical" href="https://www.harisqazi.com/configurations/homelab"><link data-rh="true" rel="alternate" href="https://www.harisqazi.com/configurations/homelab" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.harisqazi.com/configurations/homelab" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Haris&#39;s Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Haris&#39;s Blog Atom Feed">
<link rel="alternate" type="application/json" href="/blog/feed.json" title="Haris&#39;s Blog JSON Feed"><link rel="stylesheet" href="/assets/css/styles.03fad3ea.css">
<script src="/assets/js/runtime~main.5ff03685.js" defer="defer"></script>
<script src="/assets/js/main.e75deffc.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a href="https://www.harisqazi.com/" target="_self" rel="noopener noreferrer" class="navbar__brand"><div class="navbar__logo"><img src="/img/HQ-Logo-Light.png" alt="Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/HQ-Logo-Dark.png" alt="Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Haris Qazi</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Portfolio</a><a class="navbar__item navbar__link" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/harisqazi1/portfolio" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite" aria-pressed="true"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/privacy">Privacy Policy</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/category/configurations">Configurations</a><button aria-label="Collapse sidebar category &#x27;Configurations&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/configurations/homelab">Homelab</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/configurations/Gitbook_Migration">GitBook to Docusaurus Migration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/configurations/digital-books">Digital Books</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/configurations/virtual-machines">Virtual Machines</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/operations-security-opsec">Operations Security (OPSEC)</a><button aria-label="Expand sidebar category &#x27;Operations Security (OPSEC)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/open-source-intelligence-osint">Open-Source Intelligence (OSINT)</a><button aria-label="Expand sidebar category &#x27;Open-Source Intelligence (OSINT)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/category/red-team-operations">Red Team Operations</a><button aria-label="Expand sidebar category &#x27;Red Team Operations&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/category/configurations"><span itemprop="name">Configurations</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Homelab</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Homelab</h1></header>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>This has not been updated in a long time.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2>
<p>I wanted to build a Homelab for myself in order to get enterprise experience without having an enterprise-caliber occupation. I then started doing research and asking around until I found a setup that worked for me. This write-up is my journey through creating my Homelab.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="materials">Materials<a href="#materials" class="hash-link" aria-label="Direct link to Materials" title="Direct link to Materials">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="hardware">Hardware<a href="#hardware" class="hash-link" aria-label="Direct link to Hardware" title="Direct link to Hardware">​</a></h3>
<table><thead><tr><th>Syntax</th><th>Description</th><th>Price (USD)</th></tr></thead><tbody><tr><td>Firewall</td><td>Protectli Vault 4 Port​</td><td>319.00</td></tr><tr><td>Power strip with surge protector​</td><td>Tripp Lite 650VA UPS Battery Backup, LCD, 325W Eco Green, USB, RJ11, 8 Outlets ​</td><td>95.08​</td></tr><tr><td>Server​</td><td>Dell PowerEdge R710 2U Server X5650 2.66GHz 12-Cores / 64gb / 3x 1TB SAS / 2xPSU​</td><td>326.76​</td></tr><tr><td>Cat 8 Ethernet Cable​</td><td>Cat8 Ethernet Cable, Outdoor&amp;Indoor, 6FT Heavy Duty High Speed 26AWG Cat8 LAN Network Cable 40Gbps, 2000Mhz with Gold Plated RJ45 Connector, Weatherproof S/FTP UV Resistant for Router/Gaming​</td><td>8.99</td></tr><tr><td>Cat 7 Ethernet Cable​</td><td>Cat7 Ethernet Cable 1.5 ft (2 Pack) RJ45 Connector - Double Shielded STP - 10 Gigabit 600MHz​</td><td>7.49</td></tr><tr><td>Cat 7 Ethernet Cable​</td><td>Amazon Basics RJ45 Cat 7 High-Speed Gigabit Ethernet Patch Internet Cable, 10Gbps, 600MHz - White, 5-Foot​</td><td>6.99​</td></tr><tr><td>Unmanaged Switch​</td><td>NETGEAR 5-Port Gigabit Ethernet Unmanaged Switch (GS105NA)​</td><td>28.99​</td></tr><tr><td>Power Cord​</td><td>Cable Matters 2-Pack 16 AWG Heavy Duty 3 Prong Computer Monitor Power Cord in 15 Feet, UL Listed (NEMA 5-15P to IEC C13)​</td><td>24.99​</td></tr><tr><td></td><td></td><td></td></tr><tr><td><strong>Total</strong></td><td></td><td><strong>818.29</strong></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="software">Software<a href="#software" class="hash-link" aria-label="Direct link to Software" title="Direct link to Software">​</a></h3>
<table><thead><tr><th>Type</th><th>Name</th></tr></thead><tbody><tr><td>Firewall</td><td>pfSense</td></tr><tr><td>Virtualization (Type I Hypervisor)</td><td>VMware ESXi 6.5U3​</td></tr><tr><td>Cloud​</td><td>NextCloud​</td></tr><tr><td>RSS Feed​</td><td>FreshRSS​</td></tr><tr><td>Password/Hash Cracking​</td><td>Kali Linux​</td></tr><tr><td>Media System</td><td>Jellyfin</td></tr><tr><td>Dashboard</td><td>Homer</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="firewall-setup">Firewall Setup<a href="#firewall-setup" class="hash-link" aria-label="Direct link to Firewall Setup" title="Direct link to Firewall Setup">​</a></h2>
<table><thead><tr><th>Hardware</th><th>Software</th></tr></thead><tbody><tr><td>Protectli Vault 4 Port</td><td>pfSense</td></tr></tbody></table>
<p>I setup the firewall first, since all of the data was going to go through the Firewall. I used <a href="https://www.amazon.com/Extreme-Privacy-What-Takes-Disappear/dp/B094LDWKGZ/" target="_blank" rel="noopener noreferrer">Michael Bazzell&#x27;s Book</a> in order to setup pfSense on my Protectli Vault. The steps (for me) were as follows:​</p>
<ul>
<li>Installation<!-- -->
<ul>
<li><a href="http://www.pfsense.org/download" target="_blank" rel="noopener noreferrer">www.pfsense.org/download</a></li>
<li>Architecture: AMD64 | Installer: USB Memstick Installer | Console: VGA | Mirror: New York​</li>
<li>Download the .gz file and decompress it​<!-- -->
<ul>
<li>You can use 7-zip for this​</li>
<li>You should end up with a &quot;pfSense......-amd64.img&quot; file​</li>
</ul>
</li>
<li>Download Rufus or Etcher (flashing programs)​</li>
<li>Flash the pfSense file onto a USB device​</li>
<li>Power down Vault, if not powered down already​</li>
<li>Connect a USB keyboard and monitor to the Vault​</li>
<li>Insert USB into another USB port​</li>
<li>Power on the device​</li>
<li>Press Enter on all of the defaults​</li>
<li>After the installation is complete, disconnect the USB keyboard and Monitor​</li>
<li>Go to 192.168.1.1 -&gt; user:<strong>admin</strong> / password:<strong>pfsense</strong>​</li>
<li>Click Advanced to allow the page to load​</li>
<li>Accept all defaults by clicking &quot;Next&quot;, &quot;Close&quot;, and &quot;Finish&quot;​</li>
</ul>
</li>
<li>Activate Ports<!-- -->
<ul>
<li>Activate Ports (only applicable for 4-port &amp; 6-port)​</li>
<li>Access the pfSense Web interface​</li>
<li>&quot;Interfaces&quot; -&gt; &quot;Assignments&quot;​</li>
<li>Click &quot;Add&quot; option next to each empty port​</li>
<li>Repeat until all ports have been added​</li>
<li>Save Changes​</li>
<li>Click through each new port (&quot;Interfaces&quot; &gt; &quot;Opt1&quot;/&quot;Opt2&quot;)​<!-- -->
<ul>
<li>Enable each port by checking the first box​</li>
<li>Save change​</li>
<li>Do this for all ports​<!-- -->
<ul>
<li>&quot;Interfaces&quot; -&gt; &quot;Assignments&quot;	to continue for the next port​</li>
</ul>
</li>
</ul>
</li>
<li>When finished with all of them, apply changes in the upper right​</li>
<li>&quot;Interfaces&quot; -&gt; &quot;Assignments&quot; -&gt; &quot;Bridges&quot;​</li>
<li>Click on &quot;Add&quot; to create a new bridge​</li>
<li>Select the LAN option and the other ports that was added with a CNTRL-CLICK or CMD-CLICK​</li>
<li>Provide a description, such as &quot;bridge&quot;, and then hit &quot;Save&quot;​</li>
<li>&quot;Firewall&quot; -&gt; &quot;Rules&quot;​</li>
<li>Click each port (Opt, Opt2, etc.) and click the &quot;Add&quot; button (up arrow) for each​</li>
<li>Change &quot;Protocol&quot; to &quot;Any&quot;​</li>
<li>Click &quot;Save&quot; after each port is modified​</li>
<li>Apply changes in the upper right after all the ports have been added​</li>
<li>&quot;Interfaces&quot; -&gt; &quot;Assignments&quot;​</li>
<li>Click on &quot;Add&quot; next to &quot;BRIDGE0&quot; and click &quot;Save&quot;​</li>
<li>Click on a bridge, maybe called &quot;Opt3&quot; or &quot;Opt5&quot;​</li>
<li>Enable the Interface and change the description to &quot;bridge&quot;​</li>
<li>Click &quot;Save&quot;, then &quot;Apply Changes&quot;​</li>
<li>&quot;Firewall&quot; -&gt; &quot;Rules&quot;​</li>
<li>Click on &quot;Bridge&quot;, then the &quot;Add&quot; button (up arrow)​</li>
<li>Change the &quot;Protocol&quot; to &quot;Any&quot; and click &quot;Save&quot;​</li>
<li>Apply changes in the upper-right​</li>
</ul>
</li>
<li>Prevent DNS leakage<!-- -->
<ul>
<li>&quot;System&quot; -&gt; &quot;General Setup&quot;​</li>
<li>Add &quot;1.1.1.1&quot; as a DNS server, and choose the &quot;WAN_DHCP-wan&quot; interface​</li>
<li>Click &quot;Add DNS Server&quot;​</li>
<li>Add &quot;1.0.0.1&quot; as a DNS server and choose the &quot;WAN_DHCP-wan&quot; interface​</li>
<li>Disable &quot;DNS server override&quot;​</li>
<li>Click &quot;Save&quot;​</li>
</ul>
</li>
<li>Enable AES-NI CPU Crypto &amp; PowerD​<!-- -->
<ul>
<li>&quot;System&quot; -&gt; &quot;Advanced&quot;​</li>
<li>Click on the &quot;Miscellaneous&quot; tab​</li>
<li>Locate the &quot;Cryptographic &amp; Thermal Hardware&quot;​</li>
<li>Select &quot;AES-NI CPU-based Acceleration&quot; in the drop-down​</li>
<li>&quot;System&quot; -&gt; &quot;Advanced&quot; -&gt; &quot;Miscellaneous&quot; -&gt; &quot;Power Savings&quot; -&gt; Enable &quot;PowerD&quot;​</li>
</ul>
</li>
<li>Disable Notifications​<!-- -->
<ul>
<li>&quot;System&quot; -&gt; &quot;Advanced&quot; -&gt; &quot;Notifications&quot;​</li>
<li>Under the &quot;E-mail&quot; section, disable &quot;SMTP Notifications&quot;​</li>
<li>In the &quot;Sounds&quot; section, check the &quot;Disable startup/shutdown beep&quot;​</li>
<li>Click &quot;Save&quot;​</li>
</ul>
</li>
</ul>
<p>To test your DNS setup, you can use <a href="https://www.dnsleaktest.com/" target="_blank" rel="noopener noreferrer">DNSleaktest</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="privacy">Privacy<a href="#privacy" class="hash-link" aria-label="Direct link to Privacy" title="Direct link to Privacy">​</a></h3>
<p>I believe that privacy is an important aspect of our lives. With that being said, here are some changes I added to my pfSense to make my firewall more private. I found a list of Windows telemetry domains on​ <a href="https://github.com/kevinle-1/Windows-Telemetry-Blocklist/blob/master/windowsblock.txt" target="_blank" rel="noopener noreferrer">Github</a>. I then added those to my pfSense using <a href="https://linuxincluded.com/block-ads-malvertising-on-pfsense-using-pfblockerng-dnsbl/" target="_blank" rel="noopener noreferrer">this guide</a>. Using the same guide, I was able to choose more blocklists from pfSense&#x27;s recommended list under (Firewall -&gt; pfblockerNG -&gt; Feeds). I also chose to add <a href="https://raw.githubusercontent.com/adversarialtools/apple-telemetry/master/blacklist" target="_blank" rel="noopener noreferrer">Apple&#x27;s Telemetry blocking list</a> to the blacklist as well using &quot;TLD Blacklisting&quot;.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="server-setup">Server Setup<a href="#server-setup" class="hash-link" aria-label="Direct link to Server Setup" title="Direct link to Server Setup">​</a></h2>
<table><thead><tr><th>Hardware</th><th>Software</th></tr></thead><tbody><tr><td>Dell PowerEdge R710 2U Server X5650 2.66GHz 12-Cores / 64gb / 3x 1TB SAS / 2xPSU | VMware ESXi 6.5U3</td><td>FreshRSS​</td></tr><tr><td></td><td>NextCloud​</td></tr><tr><td></td><td>Kali Linux​</td></tr><tr><td></td><td>Jellyfin</td></tr><tr><td></td><td>Homer</td></tr></tbody></table>
<p>My server came cleaned or &quot;Factory Reset&quot; so my steps are going to be after that is completed. ​</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="network-setup">Network Setup<a href="#network-setup" class="hash-link" aria-label="Direct link to Network Setup" title="Direct link to Network Setup">​</a></h3>
<p>This part was straight forward on my end. I connected a Ethernet cable from the server to my switch (which was connected to my router).</p>
<img src="/img/screenshot-2021-07-03-232000.png" alt="">
<p>The ethernet cable on the left (white cable) is for the network of the server.​</p>
<p>I connected a monitor and USB Keyboard to my server so I can see what is going on. My server is a bit older so it booted up for 3-4 minutes, and then it showed an IP Address for the server. You should be able to connect to that IP Address through your browser (as long as you are on the same network). I have IDRAC (Integrated Dell Remote Access Controller 6), so that is what I am accessing on the web. After the login screen (user: <strong>root</strong> / password: <strong>calvin</strong>), I then went on the login screen: ​</p>
<img src="/img/screenshot-2021-07-03-232224.png" alt="">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="raid-5-setup">RAID-5 Setup<a href="#raid-5-setup" class="hash-link" aria-label="Direct link to RAID-5 Setup" title="Direct link to RAID-5 Setup">​</a></h3>
<p>I wanted to have a backup system for my server. I used <a href="https://en.wikipedia.org/wiki/RAID" target="_blank" rel="noopener noreferrer">RAID</a> (Redundant Array of Inexpensive Disks)​ in order to have a backup, more importantly RAID-5. RAID-5 is meant to work with 3 disks, and since I had 3 1TB hard drives, this was the best RAID model for me. After my server booted up (and after the option of configuration showed up), I tapped **CNTRL+R** in order to run the Configuration Utility. I then followed <a href="https://www.youtube.com/watch?v=sp7XV2x-CZc" target="_blank" rel="noopener noreferrer">this Youtube video</a> in order to setup RAID-5 on my server. I set it up on a screen resembling this:</p>
<img src="/img/screenshot-2021-07-03-232522.png" alt="">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vmware-esxi-setup">VMware ESXi Setup<a href="#vmware-esxi-setup" class="hash-link" aria-label="Direct link to VMware ESXi Setup" title="Direct link to VMware ESXi Setup">​</a></h3>
<p>I downloaded ESXi from​ <a href="https://my.vmware.com/web/admin/" target="_blank" rel="noopener noreferrer">VMware</a>. For my server, the version that worked was 6.5U3 (Version 6.5 Update 3). I used <a href="https://kb.vmware.com/s/article/2107518?lang=en_US&amp;queryTerm=esxi+6+5+download" target="_blank" rel="noopener noreferrer">this link</a> to find out how to find the download and how to find the license for my product. Since mine was a Dell Server, I first went to the VMware to to find the right file:</p>
<img src="/img/screenshot-2021-07-03-232743.png" alt="">
<p>I then downloaded and then used <a href="https://www.balena.io/etcher/" target="_blank" rel="noopener noreferrer">Balena Ether</a> in order to flash the ISO onto my USB drive. I then plugged my USB into my server and booted from the USB.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>If you do not use RAID, you will still need to &quot;virtualize&quot; your disks that way ESXi can use it as storage.​</p></div></div>
<p>I do not have screenshots for this part, but I can try to type out what steps I took:</p>
<ul>
<li>Plugged in my USB 2.0 with the Dell ESXi ISO flashed on it​</li>
<li>Connected my second ethernet cable to one of the 4 ethernet ports in the back :</li>
</ul>
<img src="/img/screenshot-2021-07-03-233020.png" alt="">
<ul>
<li>Powered on the server​</li>
<li>Waited until I was able to press &quot;F11&quot;​</li>
<li>Booted off of the USB​</li>
<li>When asked for where to setup ESXi, I chose my RAID-5 virtual disk​</li>
<li>I then waited for the packages in ESXi to download, and I ended up on a page (half yellow / half black)​<!-- -->
<ul>
<li>This shows the IP the ESXi is on your network​</li>
</ul>
</li>
<li>I then was able to connect to the ESXi host, and start making VMs​</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="my-setup">My Setup<a href="#my-setup" class="hash-link" aria-label="Direct link to My Setup" title="Direct link to My Setup">​</a></h2>
<p>At this point, the server was built. Now I just had to modify it to my liking. I will go into detail about what I did so it is clear if someone in the future wanted to replicate it.​</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="esxi-vms">ESXi VMs<a href="#esxi-vms" class="hash-link" aria-label="Direct link to ESXi VMs" title="Direct link to ESXi VMs">​</a></h3>
<img src="/img/screenshot-2021-07-03-233402.png" alt="">
<table><thead><tr><th>VM</th><th>OS</th><th>CPU</th><th>RAM</th><th>Storage</th></tr></thead><tbody><tr><td>NextCloud</td><td>Ubuntu Linux</td><td>2</td><td>6 GB</td><td>200 GB</td></tr><tr><td>Dashboard</td><td>Ubuntu Linux</td><td>2</td><td>6 GB</td><td>30 GB</td></tr><tr><td>Jellyfin Media Vault</td><td>Ubuntu Linux</td><td>3</td><td>10 GB</td><td>800 GB</td></tr><tr><td>Kali Linux</td><td>Debian Linux</td><td>4</td><td>16 GB</td><td>45 GB</td></tr></tbody></table>
<p>Nextcloud: My locally hosted cloud, so I do not have to rely on third-party software or SaaS providers.​</p>
<p>Dashboard: This is an Ubuntu VM with 2 docker containers and Grafana:​</p>
<img src="/img/screenshot-2021-07-03-233513.png" alt="">
<p><a href="https://github.com/bastienwirtz/homer" target="_blank" rel="noopener noreferrer">Homer</a> is a self-hosted dashboard for all of your server applications:</p>
<img src="/img/screenshot-2021-07-03-233618.png" alt="">
<p><a href="https://www.freshrss.org/" target="_blank" rel="noopener noreferrer">FreshRSS</a> is an open-source RSS Feed.</p>
<img src="/img/screenshot-2021-07-04-001758.png" alt="">
<p><a href="https://jellyfin.org/docs/index.html" target="_blank" rel="noopener noreferrer">Jellyfin</a> is an open-source alternative to Plex.</p>
<p><a href="https://www.kali.org/" target="_blank" rel="noopener noreferrer">Kali Linux</a> is a Linux distribution meant for penetration testing. My plan is to use this for hash cracking and WPA handshake cracking.</p>
<p><a href="https://grafana.com/" target="_blank" rel="noopener noreferrer">Grafana</a> is a dashboard for information usually in some sort of infographic:</p>
<img src="/img/screenshot-2021-07-03-233736.png" alt="">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="grafana-dashboard-setup">Grafana Dashboard Setup<a href="#grafana-dashboard-setup" class="hash-link" aria-label="Direct link to Grafana Dashboard Setup" title="Direct link to Grafana Dashboard Setup">​</a></h3>
<p>Here are the steps I took to setup the Grafana Dashboard:</p>
<ul>
<li>Added the InfluxDB repository using the commands from the <a href="https://docs.influxdata.com/influxdb/v1.8/introduction/install/" target="_blank" rel="noopener noreferrer">InfluxData website</a>:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">wget</span><span class="token plain"> -qO- https://repos.influxdata.com/influxdb.key </span><span class="token operator">|</span><span class="token plain"> gpg </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">--dearmor</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> /etc/apt/trusted.gpg.d/influxdb.gpg​</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">DISTRIB_ID</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">lsb_release </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-si</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:rgb(189, 147, 249);font-style:italic">DISTRIB_CODENAME</span><span class="token operator">=</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">$(</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">lsb_release </span><span class="token variable parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-sc</span><span class="token variable" style="color:rgb(189, 147, 249);font-style:italic">)</span><span class="token plain">​</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;deb [signed-by=/etc/apt/trusted.gpg.d/influxdb.gpg] https://repos.influxdata.com/</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${DISTRIB_ID</span><span class="token string variable operator" style="color:rgb(189, 147, 249);font-style:italic">,,</span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">}</span><span class="token string" style="color:rgb(255, 121, 198)"> </span><span class="token string variable" style="color:rgb(189, 147, 249);font-style:italic">${DISTRIB_CODENAME}</span><span class="token string" style="color:rgb(255, 121, 198)"> stable&quot;</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> /etc/apt/sources.list.d/influxdb.list​</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>I then installed InfluxDB using the commands from the same website:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">apt-get</span><span class="token plain"> update </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> influxdb​</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">service</span><span class="token plain"> influxdb start​</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">OR</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#If the first one works, then you do not need this. </span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">apt-get</span><span class="token plain"> update </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> influxdb​</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl unmask influxdb.service​</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl start influxdb​</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>I then ran the following commands to test that my InfluxDB setup is running:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl start influxdb​</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl status influxdb​</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> systemctl </span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">enable</span><span class="token plain"> influxdb.service​</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>I then typed in <strong>influx</strong> on the terminal, and got a small prompt with the IP address of the influx database. Here I entered the following:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># Take out the &gt; when copying the commands</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> CREATE DATABASE </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;pf_firewall&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">​</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> CREATE </span><span class="token environment constant" style="color:rgb(189, 147, 249)">USER</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;pf_firewall_write&quot;</span><span class="token plain"> WITH PASSWORD </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;WRITE_PASSWORD&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain"> </span><span class="token comment" style="color:rgb(98, 114, 164)">#Password for write</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> CREATE </span><span class="token environment constant" style="color:rgb(189, 147, 249)">USER</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;pf_firewall_read&quot;</span><span class="token plain"> WITH PASSWORD </span><span class="token string" style="color:rgb(255, 121, 198)">&#x27;READ_PASSWORD&#x27;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">;</span><span class="token plain">​ </span><span class="token comment" style="color:rgb(98, 114, 164)">#Password for read</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> GRANT READ ON pf_firewall TO pf_firewall_read​ </span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> GRANT WRITE ON pf_firewall TO pf_firewall_write​</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> exit​</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>I then created a retention policy for the logs</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">#Take out the &gt; when copying the commands</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> CREATE RETENTION POLICY 4weeks ON pf_firewall DURATION 4w REPLICATION </span><span class="token number">1</span><span class="token plain"> ​</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token operator">&gt;</span><span class="token plain"> show retention policies on pf_firewall​</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">Output should </span><span class="token function" style="color:rgb(80, 250, 123)">look</span><span class="token plain"> like the following</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">-------------------------------------</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">name     duration shardGroupDuration replicaN default</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">----     -------- ------------------ -------- -------​</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">autogen  0s       168h0m0s           </span><span class="token number">1</span><span class="token plain">        true​</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">4weeks   672h0m0s 24h0m0s            </span><span class="token number">1</span><span class="token plain">        false​</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="installed-telegraf-on-pfsense-system---package-manager---available-packages---search-for-telegraf">Installed Telegraf on Pfsense (System -&gt; Package Manager -&gt; Available Packages -&gt; Search for <strong>Telegraf)</strong><a href="#installed-telegraf-on-pfsense-system---package-manager---available-packages---search-for-telegraf" class="hash-link" aria-label="Direct link to installed-telegraf-on-pfsense-system---package-manager---available-packages---search-for-telegraf" title="Direct link to installed-telegraf-on-pfsense-system---package-manager---available-packages---search-for-telegraf">​</a></h4>
<ul>
<li>Enable SSH on your pfSense<!-- -->
<ul>
<li>System -&gt; Advanced -&gt; go to <strong>Secure Shell</strong> under Advanced and check <strong>Secure Shell Server</strong></li>
</ul>
</li>
<li>Login to pfSense with SSH<!-- -->
<ul>
<li>You can use <strong>cmd</strong> for this or <a href="https://www.chiark.greenend.org.uk/~sgtatham/putty/" target="_blank" rel="noopener noreferrer"><strong>PuTTY</strong></a>****</li>
</ul>
</li>
<li>Change directory to /bin</li>
</ul>
<p><code>cd /usr/local/bin</code></p>
<ul>
<li>Use the <strong>fetch</strong> command to download files from <a href="https://github.com/VictorRobellini/pfSense-Dashboard/tree/master/plugins" target="_blank" rel="noopener noreferrer">this github</a> and then modified the permissions</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token plain">fetch https://raw.githubusercontent.com/VictorRobellini/pfSense-Dashboard/master/plugins/telegraf_pfifgw.php</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fetch https://raw.githubusercontent.com/VictorRobellini/pfSense-Dashboard/master/plugins/telegraf_temperature.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fetch https://raw.githubusercontent.com/VictorRobellini/pfSense-Dashboard/master/plugins/telegraf_unbound.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">fetch https://raw.githubusercontent.com/VictorRobellini/pfSense-Dashboard/master/plugins/telegraf_unbound_lite.sh</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">chmod</span><span class="token plain"> </span><span class="token number">500</span><span class="token plain"> telegraf_*​</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="configuring-telegraf-in-pfsense-you-will-have-to-change-the-ip-to-the-ip-of-your-db">Configuring Telegraf in Pfsense (you will have to change the IP to the IP of your DB):<a href="#configuring-telegraf-in-pfsense-you-will-have-to-change-the-ip-to-the-ip-of-your-db" class="hash-link" aria-label="Direct link to Configuring Telegraf in Pfsense (you will have to change the IP to the IP of your DB):" title="Direct link to Configuring Telegraf in Pfsense (you will have to change the IP to the IP of your DB):">​</a></h4>
<img src="/img/screenshot-2021-07-03-233736.png" alt="">
<p>The password for the <strong>InfluxDB</strong> should be <strong>WRITE_PASSWORD.</strong></p>
<ul>
<li>I then pasted the following into the compartment for <strong>Additional configuration for Telegraf</strong>:</li>
</ul>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">inputs.exec</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   commands = </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/usr/local/bin/telegraf_pfinterface.php&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/usr/local/bin/telegraf_gateways.py&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">     </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;sh /usr/local/bin/telegraf_temperature.sh&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   </span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">   data_format = &quot;influx&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">inputs.logparser</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  files = </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/var/log/pfblockerng/dnsbl.log&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  from_beginning=true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">inputs.logparser.grok</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    measurement = &quot;dnsbl_log&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    patterns = </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;^%{WORD:BlockType}-%{WORD:BlockSubType},%{SYSLOGTIMESTAMP:timestamp:ts-syslog},%{IPORHOST:destination:tag},%{IPORHOST:source:tag},%{GREEDYDATA:call},%{WORD:BlockMethod},%{WORD:BlockList},%{IPORHOST:tld:tag},%{WORD:DefinedList:tag},%{GREEDYDATA:hitormiss}&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    timezone = &quot;Local&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">inputs.logparser.tags</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">      value = &quot;1&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">inputs.logparser</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    files = </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;/var/log/pfblockerng/ip_block.log&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    from_beginning=true</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token plain">inputs.logparser.grok</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        measurement = &quot;ip_block_log&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        patterns = </span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">&quot;^%{SYSLOGTIMESTAMP:timestamp:ts-syslog},%{NUMBER:TrackerID},%{GREEDYDATA:Interface},%{WORD:InterfaceName},%{WORD:action},%{NUMBER:IPVersion},%{NUMBER:ProtocolID},%{GREEDYDATA:Protocol},%{IPORHOST:SrcIP:tag},%{IPORHOST:DstIP:tag},%{NUMBER:SrcPort},%{NUMBER:DstPort},%{WORD:Dir},%{WORD:GeoIP:tag},%{GREEDYDATA:AliasName},%{GREEDYDATA:IPEvaluated},%{GREEDYDATA:FeedName:tag},%{HOSTNAME:ResolvedHostname},%{HOSTNAME:ClientHostname},%{GREEDYDATA:ASN},%{GREEDYDATA:DuplicateEventStatus}&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">        timezone = &quot;Local&quot;</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#[[inputs.unbound]]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#  server = &quot;127.0.0.1:953&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)">#  binary = &quot;/usr/local/bin/telegraf_unbound.sh&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<img src="/img/screenshot-2021-07-08-201432.png" alt="">
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="installing-grafana-on-ubuntu">Installing Grafana on Ubuntu<a href="#installing-grafana-on-ubuntu" class="hash-link" aria-label="Direct link to Installing Grafana on Ubuntu" title="Direct link to Installing Grafana on Ubuntu">​</a></h4>
<ul>
<li>Ran the following commands to download Grafana onto my VM:</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)">#Get the latest OSS release</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-y</span><span class="token plain"> apt-transport-https</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-y</span><span class="token plain"> software-properties-common </span><span class="token function" style="color:rgb(80, 250, 123)">wget</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">wget</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-q</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-O</span><span class="token plain"> - https://packages.grafana.com/gpg.key </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> apt-key </span><span class="token function" style="color:rgb(80, 250, 123)">add</span><span class="token plain"> -</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Add stable releases to the sources</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token builtin class-name" style="color:rgb(189, 147, 249)">echo</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;deb https://packages.grafana.com/oss/deb stable main&quot;</span><span class="token plain"> </span><span class="token operator">|</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">tee</span><span class="token plain"> </span><span class="token parameter variable" style="color:rgb(189, 147, 249);font-style:italic">-a</span><span class="token plain"> /etc/apt/sources.list.d/grafana.list</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Update and Install</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">apt-get</span><span class="token plain"> update</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">apt-get</span><span class="token plain"> </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> grafana</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>(Optional) Install other Panels</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#F8F8F2"><span class="token comment" style="color:rgb(98, 114, 164)"># Grafana worldmap panel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> grafana-cli plugins </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> grafana-worldmap-panel</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Grafana piechart panel</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token function" style="color:rgb(80, 250, 123)">sudo</span><span class="token plain"> grafana-cli plugins </span><span class="token function" style="color:rgb(80, 250, 123)">install</span><span class="token plain"> grafana-piechart-panel</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="adding-data-source-in-grafana">Adding Data source in Grafana<a href="#adding-data-source-in-grafana" class="hash-link" aria-label="Direct link to Adding Data source in Grafana" title="Direct link to Adding Data source in Grafana">​</a></h4>
<ol>
<li>Configuration &gt; Data Sources</li>
<li>Add data source</li>
<li>Select: <em>InfluxDB</em></li>
<li>Name: pf_firewall</li>
<li>URL: http://&lt;IP_address of InfluxDB&gt;:8086</li>
<li>Database: pf_firewall</li>
<li>User: pf_firewall_read</li>
<li>Password: READ_PASSWORD</li>
<li>HTTP Method: Get</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="adding-json-to-grafana-for-display">Adding JSON to Grafana for display<a href="#adding-json-to-grafana-for-display" class="hash-link" aria-label="Direct link to Adding JSON to Grafana for display" title="Direct link to Adding JSON to Grafana for display">​</a></h4>
<ul>
<li>Upload JSON file to Grafana to take in data<!-- -->
<ul>
<li>I got the file from <a href="https://raw.githubusercontent.com/VictorRobellini/pfSense-Dashboard/master/pfSense-Grafana-Dashboard.json" target="_blank" rel="noopener noreferrer">https://raw.githubusercontent.com/VictorRobellini/pfSense-Dashboard/master/pfSense-Grafana-Dashboard.json</a></li>
</ul>
</li>
</ul>
<p><a href="/assets/files/pfSense-Grafana-Dashboard-1bd88b7452c121678bf2c0b11aa7dabd.json" target="_blank">Graphana Dashboad Config File</a></p>
<ul>
<li>Restart the Telegraf service on pfSense</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="physical-setup">Physical Setup<a href="#physical-setup" class="hash-link" aria-label="Direct link to Physical Setup" title="Direct link to Physical Setup">​</a></h3>
<img src="/img/image25.png" alt="">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-diagram">Setup Diagram<a href="#setup-diagram" class="hash-link" aria-label="Direct link to Setup Diagram" title="Direct link to Setup Diagram">​</a></h3>
<img src="/img/homelab.png" alt=""></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/category/configurations"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Configurations</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/configurations/Gitbook_Migration"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">GitBook to Docusaurus Migration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#materials" class="table-of-contents__link toc-highlight">Materials</a><ul><li><a href="#hardware" class="table-of-contents__link toc-highlight">Hardware</a></li><li><a href="#software" class="table-of-contents__link toc-highlight">Software</a></li></ul></li><li><a href="#firewall-setup" class="table-of-contents__link toc-highlight">Firewall Setup</a><ul><li><a href="#privacy" class="table-of-contents__link toc-highlight">Privacy</a></li></ul></li><li><a href="#server-setup" class="table-of-contents__link toc-highlight">Server Setup</a><ul><li><a href="#network-setup" class="table-of-contents__link toc-highlight">Network Setup</a></li><li><a href="#raid-5-setup" class="table-of-contents__link toc-highlight">RAID-5 Setup</a></li><li><a href="#vmware-esxi-setup" class="table-of-contents__link toc-highlight">VMware ESXi Setup</a></li></ul></li><li><a href="#my-setup" class="table-of-contents__link toc-highlight">My Setup</a><ul><li><a href="#esxi-vms" class="table-of-contents__link toc-highlight">ESXi VMs</a></li><li><a href="#grafana-dashboard-setup" class="table-of-contents__link toc-highlight">Grafana Dashboard Setup</a></li><li><a href="#physical-setup" class="table-of-contents__link toc-highlight">Physical Setup</a></li><li><a href="#setup-diagram" class="table-of-contents__link toc-highlight">Setup Diagram</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright"> <p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><a property="dct:title" rel="cc:attributionURL" href="http://www.harisqazi.com">Portfolio</a> by <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="http://www.harisqazi.com">Haris Qazi</a> is licensed under <a href="https://creativecommons.org/licenses/by/4.0/" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">Creative Commons Attribution 4.0 International<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg" alt=""></a></p> </div></div></div></footer></div>
</body>
</html>